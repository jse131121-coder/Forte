<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A</title>

<style>
*{box-sizing:border-box;font-family:Arial;}
body{margin:0;background:#000;color:#fff}
.hidden{display:none}
.center{height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}
input,textarea,button{
  width:80%;max-width:400px;
  background:#000;color:#fff;
  border:1px solid #fff;
  padding:10px;margin:5px 0
}
nav{display:flex;justify-content:space-around;border-bottom:1px solid #fff}
.page{padding:10px}
.post,.chat{border-bottom:1px solid #333;padding:8px}
.chat.forte{text-align:left}
.chat.artist{text-align:right}
.date{opacity:.5;text-align:center;font-size:12px;margin:10px 0}
</style>
</head>

<body>

<!-- ë¡œê·¸ì¸ -->
<div id="login" class="center">
  <h1>A</h1>
  <input id="id" placeholder="ID">
  <input id="pw" type="password" placeholder="Password">
  <button onclick="login()">LOGIN</button>
</div>

<!-- ì•± -->
<div id="app" class="hidden">

<nav>
  <button onclick="show('home')">HOME</button>
  <button onclick="show('community')">COMMUNITY</button>
  <button onclick="show('chat')">CHAT</button>
</nav>

<section id="home" class="page">Welcome.</section>

<section id="community" class="page hidden">
  <textarea id="postText" placeholder="Write..."></textarea>
  <button onclick="addPost()">POST</button>
  <div id="postList"></div>
</section>

<section id="chat" class="page hidden">
  <div id="chatBox"></div>
  <textarea id="chatInput" placeholder="Message..."></textarea>
  <button onclick="sendChat()">SEND</button>
</section>

</div>

<script>
let user=null;

const posts=JSON.parse(localStorage.getItem("posts")||"[]");
const chats=JSON.parse(localStorage.getItem("chats")||"[]");

function login(){
  if(id.value==="Artist"&&pw.value==="Artist")user="Artist";
  else if(id.value==="Forte"&&pw.value==="01024773752")user="Forte";
  else return alert("ë¡œê·¸ì¸ ì‹¤íŒ¨");
  login.classList.add("hidden");
  app.classList.remove("hidden");
  renderPosts();
  renderChats();
}

function show(p){
  document.querySelectorAll(".page").forEach(e=>e.classList.add("hidden"));
  document.getElementById(p).classList.remove("hidden");
}

/* ì»¤ë®¤ë‹ˆí‹° */
function addPost(){
  if(!postText.value.trim())return;
  const p={text:postText.value,time:Date.now()};
  posts.push(p);
  localStorage.setItem("posts",JSON.stringify(posts));
  appendPost(p,posts.length-1);
  postText.value="";
}

function renderPosts(){
  postList.innerHTML="";
  posts.forEach(appendPost);
}

function appendPost(p,i){
  const d=document.createElement("div");
  d.className="post";
  d.innerHTML=`
    <pre>${p.text}</pre>
    ${user==="Forte"?`<button onclick="delPost(${i})">ì‚­ì œ</button>`:""}
  `;
  postList.appendChild(d);
}

function delPost(i){
  posts.splice(i,1);
  localStorage.setItem("posts",JSON.stringify(posts));
  renderPosts();
}

/* ì±„íŒ… */
let lastDate="";
function sendChat(){
  if(!chatInput.value.trim())return;
  const c={text:chatInput.value,user,time:new Date()};
  chats.push(c);
  localStorage.setItem("chats",JSON.stringify(chats));
  appendChat(c,chats.length-1);
  chatInput.value="";
}

function renderChats(){
  chatBox.innerHTML="";
  lastDate="";
  chats.forEach(appendChat);
}

function appendChat(c,i){
  const d=c.time.toDateString();
  if(d!==lastDate){
    const date=document.createElement("div");
    date.className="date";
    date.innerText=d;
    chatBox.appendChild(date);
    lastDate=d;
  }
  const div=document.createElement("div");
  div.className=`chat ${c.user==="Forte"?"forte":"artist"}`;
  div.innerHTML=`
    ${c.user==="Forte"?"Forte ðŸ–¤<br>":""}
    <pre>${c.text}</pre>
    ${user==="Forte"?`<button onclick="delChat(${i})">ì‚­ì œ</button>`:""}
  `;
  chatBox.appendChild(div);
}

function delChat(i){
  chats.splice(i,1);
  localStorage.setItem("chats",JSON.stringify(chats));
  renderChats();
}
</script>

</body>
</html>


